---
- name: Configure Multiple Cisco Routers
  hosts: all
  gather_facts: no
  connection: network_cli

  vars:
    ansible_network_os: cisco.ios.ios
    ansible_become: yes
    ansible_become_method: enable

  tasks:
    - name: Configure hostname
      ios_config:
        lines:
          - hostname {{ hostname }}

    - name: Configure Loopback interface
      ios_config:
        parents: interface Loopback0
        lines:
          - ip address {{ loopback_ip }} 255.255.255.0
          - no shutdown

    - name: Configure MOTD banner
      ios_config:
        lines:
          - banner motd ^Authorized access only!^
